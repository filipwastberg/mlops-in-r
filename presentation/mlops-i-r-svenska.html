<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Visualisera data i R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Filip Wästberg" />
    <meta name="date" content="2023-02-15" />
    <script src="mlops-i-r-svenska_files/header-attrs/header-attrs.js"></script>
    <link href="mlops-i-r-svenska_files/panelset/panelset.css" rel="stylesheet" />
    <script src="mlops-i-r-svenska_files/panelset/panelset.js"></script>
    <script src="mlops-i-r-svenska_files/htmlwidgets/htmlwidgets.js"></script>
    <link href="mlops-i-r-svenska_files/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="mlops-i-r-svenska_files/datatables-binding/datatables.js"></script>
    <script src="mlops-i-r-svenska_files/jquery/jquery-3.6.0.min.js"></script>
    <link href="mlops-i-r-svenska_files/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="mlops-i-r-svenska_files/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="mlops-i-r-svenska_files/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="mlops-i-r-svenska_files/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
    <script src="mlops-i-r-svenska_files/crosstalk/js/crosstalk.min.js"></script>
    <link rel="stylesheet" href="style.css" type="text/css" />
    <link rel="stylesheet" href="font.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">



background-color: #DC1E32

.solita-logomark-starter[]
.solita-text[]


&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;


.header-large[MLOps i R]

# 

.header-small[Filip Wästberg]

???

Here you can add notes, if you want to access the notes: press "p" during the presentation. Keep in mind, you can add images, links, equations or whatever here. This is markdown aswell!

---


## MLOps är en kombination av kod, data och ML-modeller

&lt;img src="img/what-is-mlops.png" width="90%" style="display: block; margin: auto;" /&gt;

---

## Data

&lt;img src="mlops-i-r-svenska_files/figure-html/unnamed-chunk-2-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
tds9_clean &lt;- tds9 |&gt; 
    mutate(date = as.Date(timestamp),
           across(consumption:temperature, ~round(., 3))) |&gt; 
    select(date, consumption, temperature) 

tds9_clean |&gt; 
    datatable()
```

<div id="htmlwidget-9a85e09fbd918955095f" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-9a85e09fbd918955095f">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704"],["2018-11-10","2018-11-11","2018-11-12","2018-11-13","2018-11-14","2018-11-15","2018-11-16","2018-11-17","2018-11-18","2018-11-19","2018-11-20","2018-11-21","2018-11-22","2018-11-23","2018-11-24","2018-11-25","2018-11-26","2018-11-27","2018-11-28","2018-11-29","2018-11-30","2018-12-01","2018-12-02","2018-12-03","2018-12-04","2018-12-05","2018-12-06","2018-12-07","2018-12-08","2018-12-09","2018-12-10","2018-12-11","2018-12-12","2018-12-13","2018-12-14","2018-12-15","2018-12-16","2018-12-17","2018-12-18","2018-12-19","2018-12-20","2018-12-21","2018-12-22","2018-12-23","2018-12-24","2018-12-25","2018-12-26","2018-12-27","2018-12-28","2018-12-29","2018-12-30","2018-12-31","2019-01-01","2019-01-02","2019-01-03","2019-01-04","2019-01-05","2019-01-06","2019-01-07","2019-01-08","2019-01-09","2019-01-10","2019-01-11","2019-01-12","2019-01-13","2019-01-14","2019-01-15","2019-01-16","2019-01-17","2019-01-18","2019-01-19","2019-01-20","2019-01-21","2019-01-22","2019-01-23","2019-01-24","2019-01-25","2019-01-26","2019-01-27","2019-01-28","2019-01-29","2019-01-30","2019-01-31","2019-02-01","2019-02-02","2019-02-03","2019-02-04","2019-02-05","2019-02-06","2019-02-07","2019-02-08","2019-02-09","2019-02-10","2019-02-11","2019-02-12","2019-02-13","2019-02-14","2019-02-15","2019-02-16","2019-02-17","2019-02-18","2019-02-19","2019-02-20","2019-02-21","2019-02-22","2019-02-23","2019-02-24","2019-02-25","2019-02-26","2019-02-27","2019-02-28","2019-03-01","2019-03-02","2019-03-03","2019-03-04","2019-03-05","2019-03-06","2019-03-07","2019-03-08","2019-03-09","2019-03-10","2019-03-11","2019-03-12","2019-03-13","2019-03-14","2019-03-15","2019-03-16","2019-03-17","2019-03-18","2019-03-19","2019-03-20","2019-03-21","2019-03-22","2019-03-23","2019-03-24","2019-03-25","2019-03-26","2019-03-27","2019-03-28","2019-03-29","2019-03-30","2019-03-31","2019-04-01","2019-04-02","2019-04-03","2019-04-04","2019-04-05","2019-04-06","2019-04-07","2019-04-08","2019-04-09","2019-04-10","2019-04-11","2019-04-12","2019-04-13","2019-04-14","2019-04-15","2019-04-16","2019-04-17","2019-04-18","2019-04-19","2019-04-20","2019-04-21","2019-04-22","2019-04-23","2019-04-24","2019-04-25","2019-04-26","2019-04-27","2019-04-28","2019-04-29","2019-04-30","2019-05-01","2019-05-02","2019-05-03","2019-05-04","2019-05-05","2019-05-06","2019-05-07","2019-05-08","2019-05-09","2019-05-10","2019-05-11","2019-05-12","2019-05-13","2019-05-14","2019-05-15","2019-05-16","2019-05-17","2019-05-18","2019-05-19","2019-05-20","2019-05-21","2019-05-22","2019-05-23","2019-05-24","2019-05-25","2019-05-26","2019-05-27","2019-05-28","2019-05-29","2019-05-30","2019-05-31","2019-06-01","2019-06-02","2019-06-03","2019-06-04","2019-06-05","2019-06-06","2019-06-07","2019-06-08","2019-06-09","2019-06-10","2019-06-11","2019-06-12","2019-06-13","2019-06-14","2019-06-15","2019-06-16","2019-06-17","2019-06-18","2019-06-19","2019-06-20","2019-06-21","2019-06-22","2019-06-23","2019-06-24","2019-06-25","2019-06-26","2019-06-27","2019-06-28","2019-06-29","2019-06-30","2019-07-01","2019-07-02","2019-07-03","2019-07-04","2019-07-05","2019-07-07","2019-07-08","2019-07-09","2019-07-10","2019-07-11","2019-07-12","2019-07-13","2019-07-14","2019-07-15","2019-07-16","2019-07-17","2019-07-18","2019-07-19","2019-07-20","2019-07-21","2019-07-22","2019-07-23","2019-07-24","2019-07-25","2019-07-26","2019-07-27","2019-07-28","2019-07-29","2019-07-30","2019-07-31","2019-08-01","2019-08-02","2019-08-03","2019-08-04","2019-08-05","2019-08-06","2019-08-07","2019-08-08","2019-08-09","2019-08-10","2019-08-11","2019-08-12","2019-08-13","2019-08-14","2019-08-15","2019-08-16","2019-08-17","2019-08-18","2019-08-19","2019-08-20","2019-08-21","2019-08-22","2019-08-23","2019-08-24","2019-08-25","2019-08-26","2019-08-27","2019-08-28","2019-08-29","2019-08-30","2019-08-31","2019-09-01","2019-09-02","2019-09-05","2019-09-06","2019-09-07","2019-09-08","2019-09-09","2019-09-10","2019-09-11","2019-09-12","2019-09-13","2019-09-14","2019-09-15","2019-09-16","2019-09-17","2019-09-18","2019-09-19","2019-09-20","2019-09-21","2019-09-22","2019-09-23","2019-09-24","2019-09-25","2019-09-26","2019-09-27","2019-09-28","2019-09-29","2019-09-30","2019-10-01","2019-10-02","2019-10-03","2019-10-04","2019-10-05","2019-10-06","2019-10-07","2019-10-08","2019-10-09","2019-10-10","2019-10-11","2019-10-12","2019-10-13","2019-10-14","2019-10-15","2019-10-16","2019-10-17","2019-10-18","2019-10-19","2019-10-20","2019-10-21","2019-10-22","2019-10-23","2019-10-24","2019-10-25","2019-10-26","2019-10-27","2019-10-28","2019-10-29","2019-10-30","2019-10-31","2019-11-01","2019-11-02","2019-11-03","2019-11-04","2019-11-05","2019-11-06","2019-11-07","2019-11-08","2019-11-09","2019-11-10","2019-11-11","2019-11-12","2019-11-13","2019-11-14","2019-11-15","2019-11-16","2019-11-17","2019-11-18","2019-11-19","2019-11-20","2019-11-21","2019-11-22","2019-11-23","2019-11-24","2019-11-25","2019-11-26","2019-11-27","2019-11-28","2019-11-29","2019-11-30","2019-12-01","2019-12-02","2019-12-03","2019-12-04","2019-12-05","2019-12-06","2019-12-07","2019-12-08","2019-12-09","2019-12-10","2019-12-11","2019-12-12","2019-12-13","2019-12-14","2019-12-15","2019-12-16","2019-12-17","2019-12-18","2019-12-19","2019-12-20","2019-12-21","2019-12-22","2019-12-23","2019-12-24","2019-12-25","2019-12-26","2019-12-27","2019-12-28","2019-12-29","2019-12-30","2019-12-31","2020-01-01","2020-01-02","2020-01-03","2020-01-04","2020-01-05","2020-01-06","2020-01-07","2020-01-08","2020-01-09","2020-01-10","2020-01-11","2020-01-12","2020-01-13","2020-01-14","2020-01-15","2020-01-16","2020-01-17","2020-01-19","2020-01-20","2020-01-21","2020-01-23","2020-01-24","2020-01-27","2020-01-28","2020-01-29","2020-01-30","2020-01-31","2020-02-01","2020-02-02","2020-02-03","2020-02-04","2020-02-05","2020-02-06","2020-02-07","2020-02-08","2020-02-09","2020-02-10","2020-02-11","2020-02-12","2020-02-13","2020-02-14","2020-02-15","2020-02-16","2020-02-17","2020-02-18","2020-02-19","2020-02-20","2020-02-21","2020-02-22","2020-02-23","2020-02-24","2020-02-25","2020-02-26","2020-02-27","2020-02-28","2020-02-29","2020-03-01","2020-03-02","2020-03-03","2020-03-04","2020-03-05","2020-03-06","2020-03-07","2020-03-08","2020-03-09","2020-03-10","2020-03-11","2020-03-12","2020-03-13","2020-03-14","2020-03-15","2020-03-16","2020-03-17","2020-03-18","2020-03-19","2020-03-20","2020-03-21","2020-03-22","2020-03-23","2020-03-24","2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29","2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10","2020-04-11","2020-04-12","2020-04-13","2020-04-14","2020-04-15","2020-04-16","2020-04-17","2020-04-18","2020-04-19","2020-04-20","2020-04-21","2020-04-22","2020-04-23","2020-04-24","2020-04-25","2020-04-26","2020-04-27","2020-04-28","2020-04-29","2020-04-30","2020-05-01","2020-05-02","2020-05-03","2020-05-04","2020-05-05","2020-05-06","2020-05-07","2020-05-08","2020-05-09","2020-05-10","2020-05-11","2020-05-12","2020-05-13","2020-05-14","2020-05-15","2020-05-16","2020-05-17","2020-05-18","2020-05-19","2020-05-20","2020-05-21","2020-05-22","2020-05-23","2020-05-24","2020-05-25","2020-05-26","2020-05-27","2020-05-28","2020-05-29","2020-05-30","2020-05-31","2020-06-01","2020-06-02","2020-06-03","2020-06-04","2020-06-05","2020-06-06","2020-06-07","2020-06-08","2020-06-09","2020-06-10","2020-06-11","2020-06-12","2020-06-13","2020-06-14","2020-06-15","2020-06-16","2020-06-17","2020-06-18","2020-06-19","2020-06-20","2020-06-21","2020-06-22","2020-06-23","2020-06-24","2020-06-25","2020-06-26","2020-06-27","2020-06-28","2020-06-29","2020-06-30","2020-07-01","2020-07-02","2020-07-03","2020-07-04","2020-07-05","2020-07-06","2020-07-07","2020-07-08","2020-07-09","2020-07-11","2020-07-12","2020-07-13","2020-07-14","2020-07-15","2020-07-16","2020-07-17","2020-07-18","2020-07-19","2020-07-20","2020-07-21","2020-07-22","2020-07-23","2020-07-24","2020-07-25","2020-07-26","2020-07-27","2020-07-28","2020-07-29","2020-07-30","2020-07-31","2020-08-01","2020-08-02","2020-08-03","2020-08-04","2020-08-05","2020-08-06","2020-08-07","2020-08-08","2020-08-09","2020-08-10","2020-08-11","2020-08-12","2020-08-13","2020-08-14","2020-08-15","2020-08-16","2020-08-17","2020-08-18","2020-08-19","2020-08-20","2020-08-21","2020-08-22","2020-08-23","2020-08-24","2020-08-25","2020-08-26","2020-08-27","2020-08-28","2020-08-29","2020-08-30","2020-08-31","2020-09-01","2020-09-02","2020-09-03","2020-09-04","2020-09-05","2020-09-06","2020-09-07","2020-09-08","2020-09-09","2020-09-10","2020-09-11","2020-09-12","2020-09-13","2020-09-14","2020-09-15","2020-09-16","2020-09-17","2020-09-18","2020-09-19","2020-09-20","2020-09-21","2020-09-22","2020-09-23","2020-09-24","2020-09-25","2020-09-26","2020-09-27","2020-09-28","2020-09-29","2020-09-30","2020-10-01","2020-10-02","2020-10-03","2020-10-04","2020-10-05","2020-10-06","2020-10-07","2020-10-08","2020-10-09","2020-10-10","2020-10-11","2020-10-12","2020-10-13","2020-10-14","2020-10-15","2020-10-16","2020-10-17","2020-10-18","2020-10-19","2020-10-20","2020-10-21"],[1.37,1.36,1.33,1.58,1.47,1.14,1.46,1.32,1.3,1.39,1.4,0.61,0.72,0.82,0.98,1.01,0.98,1,0.64,0.71,0.87,0.89,1.02,0.86,1.12,1.36,1.48,1.68,1.65,1.67,1.37,1.12,0.95,0.97,1.11,1.16,1.42,1.27,1.04,1.29,1.06,0.75,0.56,0.44,0.33,0.52,0.43,0.27,0.43,1.1,0.92,0.79,1.35,0.53,0.56,0.4,0.38,0.33,0.16,0.07,0.15,0.14,0.26,0.26,0.24,0.24,0.18,0.13,0.1,0.05,0.07,0.14,0.23,0.17,0.19,0.12,0.18,0.17,0.1,0.31,0.14,0.06,0.05,0.06,0.09,0.14,0.12,0.11,0.06,0.05,0.05,0.07,0.06,0.13,0.11,0.07,0.06,0.2,0.19,0.1,0.07,0.06,0.06,0.06,0.06,0.16,0.14,0.14,0.11,0.06,0.05,0.1,0.12,0.09,0.06,0.16,0.1,0.12,0.05,0.11,0.08,0.1,0.08,0.07,0.1,0.05,0.07,0.11,0.06,0.06,0.12,0.06,0.05,0.06,0.07,0.06,0.13,0.06,0.06,0.06,0.11,0.06,0.06,0.07,0.07,0.06,0.05,0.18,0.15,0.09,0.13,0.06,0.06,0.06,0.12,0.12,0.34,0.2,0.06,0.06,0.11,0.21,0.06,0.16,0.53,0.3,0.33,0.31,0.21,0.08,0.2,0.51,0.29,0.31,0.21,0.19,0.12,0.42,0.57,0.54,0.53,0.62,0.64,0.66,0.98,0.77,0.8,0.3,0.14,0.22,0.28,0.27,0.32,0.31,0.41,0.36,0.37,0.36,0.78,0.79,0.82,0.92,1,1.03,1.11,0.54,0.5,0.56,0.22,0.23,0.28,0.23,1.01,1.12,0.82,0.85,0.97,1.45,1.5,0.81,0.6,1.16,0.7,1.23,1.72,1.2,0.69,0.84,1.16,0.87,0.84,1.37,1.43,1.65,1.12,1.206,1.762,1.411,1.72,1.35,1.42,1.29,1.42,2.12,2.82,0.813,0.022,0.022,0.022,0.022,0.022,0.022,0.022,1.89,3.17,0.864,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,0.007,1.353,1.23,1.5,1.56,1.87,2.08,2.05,2.24,2.45,2.17,2.08,2.02,2.32,0.68,0,0,0,0,0,0,2.683,2.699,2.867,2.416,2.473,2.552,2.86,2.483,2.466,2.808,2.66,1.873,2.004,2.117,2.412,1.791,2.238,2.33,2.436,2.151,3.308,3.146,3.145,3.895,3.202,2.842,2.693,2.936,2.721,2.48,2.554,2.535,2.576,2.709,2.544,2.694,2.321,2.567,2.632,2.855,3.362,2.825,3.177,3.512,3.715,4.31,4.447,4.07,3.578,3.11,2.709,2.808,1.376,1.436,2.528,2.504,2.475,2.074,2.158,2.421,2.569,3.093,3.383,3.203,2.8,2.723,2.547,2.385,2.569,2.661,2.374,1.798,2.424,2.834,2.767,2.629,2.465,2.165,1.974,2.375,2.459,1.629,1.9,1.998,1.296,0.786,1.206,1.762,1.411,1.215,0.805,0.712,1.246,1.055,1.357,0.819,0.748,0.472,1.057,1.28,1.068,1.496,1.257,1.355,1.054,1.017,0.762,1.217,1.235,0.822,1.218,0.847,0.593,0.463,0.361,0.237,0.271,0.211,0.28,0.234,0.062,0.162,0.066,0.066,0.18,0.318,0.358,0.247,0.192,0.23,0.181,0.122,0.069,0.063,0.064,1.88,1.98,2.08,1.417,1.298,0.065,0.07,0.071,0.064,0.065,0.08,0.079,0.243,0.071,0.176,0.154,0.071,0.074,0.218,0.253,0.431,0.285,0.338,0.194,0.068,0.065,0.066,0.068,0.09,0.215,0.215,0.166,0.168,0.069,0.067,0.071,0.066,0.064,0.068,0.067,0.069,0.067,0.064,0.065,0.066,0.218,0.065,0.067,0.07,0.073,0.073,0.074,0.078,0.078,0.075,0.074,0.071,0.07,0.07,0.076,0.072,0.071,0.072,0.068,0.066,0.069,0.078,0.081,0.076,0.07,0.07,0.265,0.368,0.277,0.073,0.072,0.068,0.068,0.068,0.065,0.21,0.42,0.163,0.073,0.101,0.486,0.37,0.263,0.081,0.084,0.081,0.093,0.246,0.317,0.281,0.241,0.068,0.062,0.061,0.302,0.165,0.071,0.201,0.36,0.442,0.347,0.439,0.347,0.237,0.065,0.117,0.279,0.288,0.68,0.638,1.028,0.925,0.481,0.503,0.988,0.85,0.68,1.143,1.222,1.263,1.073,0.754,0.963,1.04,0.853,0.505,0.727,0.512,0.451,0.147,0.25,0.442,0.532,0.377,0.895,1.165,0.85,0.631,1.058,0.876,1.34,1.044,1.88,1.98,2.08,2.192,1.417,1.298,1.207,1.102,1.145,1.277,1.137,0.955,1.172,1.43,1.402,1.326,1.121,1.305,1.402,1.332,0.347,0.237,0.065,2.218,2.263,2.244,2.342,2.58,2.563,2.44,2.931,3.103,2.937,2.406,2.059,1.698,1.593,1.588,1.875,2.257,2.164,1.812,1.639,1.802,1.969,2.22,2.475,2.579,2.52,2.395,2.08,2.682,2.61,1.32,1.383,1.944,2.131,2.011,2.469,1.59,1.678,1.425,1.83,1.457,1.666,1.646,1.474,2.004,1.934,1.565,1.597,1.511,1.755,1.819,2.199,2.064,1.642,2.087,1.653,2.281,2.271,1.718,2.858,2.71,2.006,2.3,2.253,2.371,2.887,2.964,3.05,2.928,2.405,2.649,3.174,2.732,2.527,2.428,2.256,2.443,2.434,2.32,2.343,2.027,1.832,1.767,1.783,2.129,2.183,1.63,1.667,1.981,1.629,1.58,1.663,1.944,2.131,2.011,2.469,1.59,1.678,1.425,1.83,1.457,1.666,1.649],[3.549,4.428,4.457,2.955,2.833,5.463,3.53,4.142,4.24,3.963,4.486,9.195,8.475,7.125,6.652,5.991,6.585,5.75,8.837,6.971,7.425,7.832,6.074,7.017,5.721,4.486,2.676,1.571,3.024,1.52,2.64,5.97,7.251,6.765,5.246,5.393,3.645,4.324,4.61,4.477,6.059,5.746,9.589,11.574,11.529,10.487,11.476,12.728,10.77,5.78,6.245,5.66,4.442,9.578,9.957,10.697,10.345,11.521,11.919,18.52,15.073,15.074,11.9,11.459,12.083,12.737,13.786,16.862,16.605,16.681,12.399,12.664,12.785,13.162,12.61,14.535,12.577,13.159,17.645,12.282,12.869,15.158,14.764,14.525,13.739,15.203,15.186,15.944,15.83,17.089,17.668,17.248,15.578,15.07,13.831,15.201,15.07,12.627,13.789,15.182,17.156,17.365,17.716,18.465,14.599,14.074,14.926,15.117,14.73,16.016,15.196,15.182,15.6,16.133,15.246,14.748,15.478,16.382,15.432,15.244,15.786,16.217,18.802,16.367,17.906,18.471,16.62,17.419,18.199,16.567,15.859,15.69,16.791,16.801,16.916,16.023,14.725,16.112,16.537,15.767,15.696,18.541,17.231,17.453,16.348,15.186,15.296,15.367,16.651,16.177,16.721,17.482,15.874,15.431,15.646,15.355,13.233,13.534,15.765,15.853,14.998,14.817,18.119,14.72,11.544,14.817,13.198,13.626,12.741,15.067,14.04,11.66,12.138,13.616,14.379,13.731,14.58,12.697,11.13,11.733,11.343,10.732,10.473,11.904,9.411,10.331,10.509,13.286,14.692,14.95,14.307,15.146,13.643,13.487,12.184,11.981,12.148,12.525,10.731,9.348,7.578,8.924,6.142,6.8,5.948,10.484,11.967,10.633,13.167,12.689,12.983,13.062,9.279,6.697,9.541,9.392,8.203,6.041,5.072,9.803,11.062,7.762,10.867,6.011,3.428,5.173,10.545,9.355,5.77,9.174,9.134,6.588,5.333,3.677,7.826,7.341,5.65,6.25,2.64,6.69,4.989,7.32,5.957,0.703,-3.688,-3.955,1.844,8.367,5.662,4.092,4.632,4.225,1.885,0.334,-0.347,-0.573,2.626,4.602,-1.128,6.411,7.677,6.688,4.987,4.737,1.058,-1.753,-1.935,2.539,0.566,0.03,-1.535,-2.16,2.859,1.542,4.929,5.061,5.414,7.813,6.168,6.119,5.017,3.433,3.057,3.183,1.151,2.48,4.265,4.474,2.472,1.766,0.945,-2.442,-1.788,2.499,1.366,2.452,-0.551,-1.475,-1.003,1.329,0.621,-0.174,-2.038,-0.652,-0.594,-1.108,0.26,5.184,4.693,3.815,1.259,4.767,3.393,2.592,2.656,2.636,-3.024,-4.26,-4.275,-7.748,-3.572,-0.729,0.662,-0.793,-1.333,-0.615,1.104,1.159,0.827,-0.122,0.478,-1.218,0.777,0.292,-0.751,-1.375,-4.747,-1.731,-3.861,-6.934,-7.323,-8.997,-11.115,-9.1,-5.758,-3.97,-2.619,-2.061,-0.493,1.434,-1.201,-2.725,-2.67,-0.444,3.239,1.285,0.168,-2.212,-4.721,-5.152,-4.936,-1.453,-0.168,1.102,0.018,-0.418,0.968,2.188,1.456,-1.521,-1.757,-0.839,-0.315,0.557,1.335,-0.044,0.25,5.77,5.025,3.871,6.388,8.892,7.341,5.65,6.25,7.616,11.039,11.746,7.567,7.934,7.103,9.127,9.585,13.323,9.375,6.377,8.451,6.857,7.072,6.606,7.669,7.605,8.818,8.426,7.724,9.136,8.015,8.128,10.385,11.75,14.887,16.431,18.233,18.521,12.26,13.784,18.991,20.111,19.796,18.533,15.796,15.374,13.872,15.595,15.664,16.799,17.402,18.919,20.02,19.58,19.325,3.003,1.32,-0.062,6.097,7.542,16.663,18.818,20.126,19.66,17.996,14.638,16.734,16.068,15.144,14.029,13.674,13.965,13.72,14.224,13.048,12.857,12.998,14.04,15.429,17.894,20.22,19.442,20.478,17.939,16.651,17.794,17.703,18.515,18.917,17.34,18.05,19.839,19.384,18.139,19.957,21.432,21.723,20.397,16.535,17.215,19.658,22.193,19.984,18.898,18.147,18.766,18.544,19.325,19.879,21.655,21.344,23.453,23.936,21.249,21.691,24.858,20.086,19.721,20.562,20.152,18.302,17.169,20.756,22.97,19.692,18.12,15.333,14.722,14.921,15.827,17.338,19.37,17.953,16.731,16.48,15.99,14.512,16.694,18.424,15.379,14.24,13.878,12.728,15.796,16.417,15.823,13.739,14.872,15.012,16.086,15.761,17.364,17.881,16.864,13.768,14.4,15.512,14.308,14.013,13.388,13.534,13.224,13.06,14.492,18.076,16.578,14.372,14.985,11.833,11.449,8.2,8.344,12.886,13.061,9.529,8.726,11.281,9.665,7.698,7.078,7.543,11.434,9.112,7.575,10.736,12.763,11.246,13.074,14.108,16.503,16.747,14.031,11.95,13.198,10.339,7.001,9.985,11.509,9.963,10.33,6.715,9.198,3.003,1.32,-0.062,1.075,6.097,7.542,7.8,9.023,8.327,7.055,8.381,9.619,8.895,7.949,7.778,7.951,8.97,9.028,8.246,8.67,13.06,14.49,18.08,2.372,1.644,1.542,1.328,-0.69,-1.857,-3.099,-3.978,-4.914,-3.106,1.554,3.657,5.466,5.124,6.792,5.374,2.318,2.971,5.491,5.781,3.415,3.887,1.776,0.634,-0.621,-0.241,-0.099,0.59,-0.921,-2.059,2.258,1.584,0.796,-1.327,-2.144,-2.805,5.519,3.654,6.203,2.479,4.609,0.955,3.26,6.157,1.273,1.536,3.372,2.771,1.292,3.002,2.208,-0.566,-0.809,2.968,-0.137,1.577,1.083,0.927,4.295,-2.732,-3.675,0.312,-1.724,0.617,-0.107,-2.334,-2.944,-3.033,-4.169,-2.367,-1.218,-4.906,-2.816,-1.114,-0.53,-0.279,-1.953,0.12,0.832,0.278,2.611,3.635,4.022,3.497,1.914,1.377,5.348,4.572,3.32,4.81,4.436,5.372,0.8,-1.33,-2.14,-2.8,5.52,3.65,6.2,2.48,4.61,0.95,1.93]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>date<\/th>\n      <th>consumption<\/th>\n      <th>temperature<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>

---

## Pins

Ett paket med vilket vi kan publicera R/Python-objekt till en rad olika miljöer

- SharePoint
- OneDrive
- Azure
- AWS
- Google cloud
- Posit Connect (tidigare RStudio Connect)

... och fler.

---


```r
library(pins)

board &lt;- board_temp()

board
```

```
## Pin board &lt;pins_board_folder&gt;
## Path: '/var/folders/pn/9hhpnpd15_d2k3qp5k814nnh0000gq/T/RtmpGBVc78/pins-1240b52679b82'
## Cache size: 0
```

---

Skriv dataset till en board:


```r
pin_write(
    board, tds9_clean, 
    "tds9_clean", 
    versioned = TRUE,
    description = "Data from distict heating metering point tds9.",
    metadata = list(source = "District heating company A")
)

pin_read(board, "tds9_clean") |&gt; 
    head()
```

```
## # A tibble: 6 × 3
##   date       consumption temperature
##   &lt;date&gt;           &lt;dbl&gt;       &lt;dbl&gt;
## 1 2018-11-10        1.37        3.55
## 2 2018-11-11        1.36        4.43
## 3 2018-11-12        1.33        4.46
## 4 2018-11-13        1.58        2.96
## 5 2018-11-14        1.47        2.83
## 6 2018-11-15        1.14        5.46
```

---


```r
pin_versions(board, "tds9_clean")
```

```
## # A tibble: 1 × 3
##   version                created             hash 
##   &lt;chr&gt;                  &lt;dttm&gt;              &lt;chr&gt;
## 1 20230215T144046Z-1ee9e 2023-02-15 15:40:00 1ee9e
```

---

Lägg till lite ny data


```r
new_data &lt;- tibble(
    date = as.Date("2020-10-22"),
    temperature = 8.154,
    consumption = 1.12
)

tds9_new_data &lt;- bind_rows(new_data, tds9_clean)

tds9_new_data |&gt; 
    head()
```

```
## # A tibble: 6 × 3
##   date       temperature consumption
##   &lt;date&gt;           &lt;dbl&gt;       &lt;dbl&gt;
## 1 2020-10-22        8.15        1.12
## 2 2018-11-10        3.55        1.37
## 3 2018-11-11        4.43        1.36
## 4 2018-11-12        4.46        1.33
## 5 2018-11-13        2.96        1.58
## 6 2018-11-14        2.83        1.47
```

---

## Skriv en till version av data


```r
pin_write(board, tds9_new_data, "tds9_clean", versioned = TRUE)

pin_versions(board, "tds9_clean")
```

```
## # A tibble: 2 × 3
##   version                created             hash 
##   &lt;chr&gt;                  &lt;dttm&gt;              &lt;chr&gt;
## 1 20230215T144046Z-1ee9e 2023-02-15 15:40:00 1ee9e
## 2 20230215T144046Z-8dee1 2023-02-15 15:40:00 8dee1
```


---

## Data drift

- Hur kan vi upptäcka data som driftar?

- Covariate Drift: Covariate drift is defined as Non-Intersection Distance between two distributions.


```r
dragons &lt;- DALEX::dragons

glimpse(dragons)
```

```
## Rows: 2,000
## Columns: 8
## $ year_of_birth        &lt;dbl&gt; -1291, 1589, 1528, 1645, -8, 915, -1557, -1144, -…
## $ height               &lt;dbl&gt; 59.40365, 46.21374, 49.17233, 48.29177, 49.99679,…
## $ weight               &lt;dbl&gt; 15.32391, 11.80819, 13.34482, 13.27427, 13.08757,…
## $ scars                &lt;dbl&gt; 7, 5, 6, 5, 1, 2, 3, 7, 6, 32, 29, 3, 8, 3, 18, 3…
## $ colour               &lt;fct&gt; red, red, red, green, red, red, black, blue, red,…
## $ year_of_discovery    &lt;dbl&gt; 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1700, 1…
## $ number_of_lost_teeth &lt;dbl&gt; 25, 28, 38, 33, 18, 20, 28, 29, 2, 22, 25, 0, 4, …
## $ life_length          &lt;dbl&gt; 1368.4331, 1377.0474, 1603.9632, 1434.4222, 985.4…
```

---


```r
library(drifter)
dragons_test &lt;- DALEX::dragons_test

d &lt;- calculate_covariate_drift(dragons, dragons_test)
d
```

```
##                   Variable  Shift
##   -------------------------------------
##              year_of_birth    8.9  
##                     height   15.3  .
##                     weight   14.7  .
##                      scars    4.6  
##                     colour   18.0  .
##          year_of_discovery   97.4  ***
##       number_of_lost_teeth    6.3  
##                life_length    8.6
```

---


```r
dragons_test |&gt; 
    ggplot(aes(x = year_of_discovery)) +
    geom_histogram()
```

&lt;img src="mlops-i-r-svenska_files/figure-html/unnamed-chunk-11-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---


```r
dragons |&gt; 
    ggplot(aes(x = year_of_discovery)) +
    geom_histogram()
```

&lt;img src="mlops-i-r-svenska_files/figure-html/unnamed-chunk-12-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---

## MLOps - Data 

- Se till att versionshantera data (inte samma sak som att versionshantera kod)
- Ha koll på hur data förändras

---

## MLOps - Models

- Vi vill ha en tydlig förklaring av vad modellen gör och eventuella begränsningar

--

- Om vi har automatisk träning vill vi monitorera den

--

- Om modellen ger prediktioner vill vi se hur dessa preseterar mot ny data

---

## Model card

Ett dokument som förklarar modellen

- Detaljer om modellen, ex. en linjär regression

--

- Hur den ska användas, ex. Användas för att prognosticera fjärrvärmeanvändning

--

- Viktiga faktorer - Finns det demografiska eller tekniska faktorer som är av betydelse?

--

- Mått som används för att beskriva modellens prestanda

--

- Tränings- och utvärderingsdata, hur det valts 

--

- Kvantitativ analys, hur presterar modellen på träningsdata, hur presterar den på eventuella undergrupper? Finns det grupper där den presterar bättre eller sämre?

--

- Etisk hänsyn, finns det risker med modellen om den inte används korrekt m.m.

--

- Varningar och rekommendationer, finns det något som modellen kan eller inte kan göra? Exempelvis bygger modellen här på historisk temperatur, kan den då användas på väderprognoser?


---

## `vetiver` - MLOps i R


```r
library(vetiver)
library(pins)
library(mgcv)
board &lt;- board_temp()
tds9_train &lt;- filter(tds9_clean, date &lt; "2020-08-01")
tds9_test &lt;- filter(tds9_clean, date &gt;= "2020-08-01")

pin_write(board, tds9_test, "tds9_test")

dh_gam &lt;- gam(consumption ~ s(temperature), data = tds9_train)

v &lt;- vetiver_model(dh_gam, "dh_gam", description = "A generalized addative model")

vetiver_pin_write(board, v, "dh_gam")

v
```

```
## 
## ── dh_gam ─ &lt;butchered_gam&gt; model for deployment 
## A generalized addative model using 1 feature
```

---

## Model card

&lt;img src="img/vetiver-templates.png" width="70%" style="display: block; margin: auto;" /&gt;

---

## Bevaka omträning om modell

- Vi har ett flöde som läser data och tränar om modellen

---

Ta fram metrics för träningsdata


```r
tds9_metrics &lt;- augment(dh_gam, new_data = tds9_train) %&gt;%
    mutate(date = tds9_train$date) |&gt; 
    vetiver_compute_metrics(date, period = "month", truth = consumption, 
                            estimate = .fitted, every = 4L)
```

- Samma princip kan användas för att bevaka ny data som kommer in

---

Visualisera metrics


```r
vetiver::vetiver_plot_metrics(tds9_metrics)
```

&lt;img src="mlops-i-r-svenska_files/figure-html/unnamed-chunk-16-1.png" width="70%" style="display: block; margin: auto;" /&gt;

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"countIncrementalSlides": true,
"highlightStyle": "atom-one-light",
"highlightLines": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
